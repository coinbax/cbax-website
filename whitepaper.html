<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBAX - Whitepaper</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=IBM+Plex+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #121212;
            color: white;
            font-family: 'IBM Plex Mono', monospace;
            text-align: center;
            padding: 50px;
            max-width: 800px;
            margin: 0 auto;
        }
        .logo {
            font-size: 3rem;
            font-weight: bold;
            letter-spacing: 4px;
            font-family: 'Inter', sans-serif;
            animation: fadeIn 2s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .message {
            font-size: 1.5rem;
            margin-top: 20px;
            margin-bottom: 40px;
            opacity: 0.8;
        }
        .form-container {
            background-color: #1e1e1e;
            padding: 30px;
            border-radius: 8px;
            max-width: 500px;
            margin: 0 auto;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        input {
            padding: 12px;
            border-radius: 4px;
            border: none;
            background-color: #2a2a2a;
            color: white;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1rem;
        }
        button {
            padding: 12px;
            border-radius: 4px;
            border: none;
            background-color: #605cff;
            color: white;
            font-family: 'IBM Plex Mono', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 1rem;
        }
        button:hover {
            background-color: #4b48c7;
        }
        .success-message {
            display: none;
            margin-top: 20px;
            color: #4caf50;
        }
        a {
            color: #605cff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .back-link {
            margin-top: 40px;
            display: inline-block;
        }
        .manual-download-btn {
            display: inline-block;
            margin-top: 15px;
            background-color: #605cff;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
        }
        .manual-download-btn:hover {
            background-color: #4b48c7;
        }
        .hidden {
            display: none;
        }
        #loading {
            display: none;
            margin-top: 10px;
        }
        .loader {
            border: 3px solid #2a2a2a;
            border-radius: 50%;
            border-top: 3px solid #605cff;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="logo">CBAX</div>
    <div class="message">Whitepaper Download</div>
    
    <div class="form-container">
        <p>Enter your email to download our whitepaper:</p>
        <form id="whitepaper-form">
            <input type="email" id="email" name="emailAddress" placeholder="Your email address" required>
            <button type="submit">Submit</button>
        </form>
        <div id="loading">
            <div class="loader"></div>
        </div>
        <div id="success-message" class="success-message">
            <p>Thank you! Click the button below to download the whitepaper.</p>
            <a href="assets/Coinbax_whitepaper_DRAFT_v3.8.pdf?v=3.8" class="manual-download-btn" download="Coinbax_Whitepaper.pdf" id="download-link">Download Whitepaper</a>
        </div>
    </div>
    
    <a href="index.html" class="back-link">‚Üê Back to Home</a>

    <script>
        // Your Google Form submission URL with the correct form ID
        const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSfPVdQ55YToXc7G54xhswK9BD_GBAYgUzsjO7wqvWLikOY1wA/formResponse';
        
        // ID of your email field in the Google Form
        const emailFieldId = 'entry.817156646';
        
        // ID of your "downloaded" field in the Google Form
        const downloadedFieldId = 'entry.1660808567';
        
        // Store the submitted email
        let submittedEmail = '';
        
        document.getElementById('whitepaper-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show loading spinner
            document.getElementById('loading').style.display = 'block';
            document.getElementById('whitepaper-form').style.display = 'none';
            
            submittedEmail = document.getElementById('email').value;
            
            // Create iframe for form submission
            let iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            // Create a form within the iframe
            let iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            let form = iframeDoc.createElement('form');
            form.action = googleFormUrl;
            form.method = 'POST';
            
            // Add email field
            let emailField = iframeDoc.createElement('input');
            emailField.type = 'email';
            emailField.name = emailFieldId;
            emailField.value = submittedEmail;
            form.appendChild(emailField);
            
            // Add downloaded field (initially No)
            let downloadedField = iframeDoc.createElement('input');
            downloadedField.type = 'text';
            downloadedField.name = downloadedFieldId;
            downloadedField.value = 'No';
            form.appendChild(downloadedField);
            
            // Append form to iframe and submit
            iframeDoc.body.appendChild(form);
            form.submit();
            
            // Show success message after a short delay
            setTimeout(function() {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('success-message').style.display = 'block';
            }, 1500);
        });
        
        // Track download clicks
        document.getElementById('download-link').addEventListener('click', function(e) {
            // Prevent the default link behavior
            e.preventDefault();
            
            if (submittedEmail) {
                // Create iframe for form submission
                let iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                // Create a form within the iframe
                let iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                let form = iframeDoc.createElement('form');
                form.action = googleFormUrl;
                form.method = 'POST';
                
                // Add email field
                let emailField = iframeDoc.createElement('input');
                emailField.type = 'email';
                emailField.name = emailFieldId;
                emailField.value = submittedEmail;
                form.appendChild(emailField);
                
                // Add downloaded field (set to Yes)
                let downloadedField = iframeDoc.createElement('input');
                downloadedField.type = 'text';
                downloadedField.name = downloadedFieldId;
                downloadedField.value = 'Yes';
                form.appendChild(downloadedField);
                
                // Append form to iframe and submit
                iframeDoc.body.appendChild(form);
                form.submit();
                
                // After a small delay to ensure the form submission completes,
                // navigate to the PDF URL
                const pdfUrl = document.getElementById('download-link').href;
                setTimeout(function() {
                    window.location.href = pdfUrl;
                }, 300);
            } else {
                // If somehow no email is stored, just open the PDF directly
                window.location.href = document.getElementById('download-link').href;
            }
        });
    </script>
</body>
</html> 